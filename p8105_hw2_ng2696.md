p8105\_hw2\_ng2696
================
Nihan Gencerliler
10/2/2019

# Homework 2

``` r
library(readxl)
library (ggplot2)
library(tidyverse)
```

    ## ── Attaching packages ───────────────────────────────────────── tidyverse 1.2.1 ──

    ## ✔ tibble  2.1.3     ✔ purrr   0.3.2
    ## ✔ tidyr   1.0.0     ✔ dplyr   0.8.3
    ## ✔ readr   1.3.1     ✔ stringr 1.4.0
    ## ✔ tibble  2.1.3     ✔ forcats 0.4.0

    ## ── Conflicts ──────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

## Problem 1

``` r
mr_trash_wheel = read_excel("./p8105_hw2_ng2696_files/Trash-Wheel-Collection-Totals-8-6-19.xlsx",sheet="Mr. Trash Wheel", range="A2:N406") %>%
  janitor::clean_names() %>%
  drop_na() %>%
  mutate(sports_balls_integer=as.integer(sports_balls))
head(mr_trash_wheel)
```

    ## # A tibble: 6 x 15
    ##   dumpster month  year date                weight_tons volume_cubic_ya…
    ##      <dbl> <chr> <dbl> <dttm>                    <dbl>            <dbl>
    ## 1        1 May    2014 2014-05-16 00:00:00        4.31               18
    ## 2        2 May    2014 2014-05-16 00:00:00        2.74               13
    ## 3        3 May    2014 2014-05-16 00:00:00        3.45               15
    ## 4        4 May    2014 2014-05-17 00:00:00        3.1                15
    ## 5        5 May    2014 2014-05-17 00:00:00        4.06               18
    ## 6        6 May    2014 2014-05-20 00:00:00        2.71               13
    ## # … with 9 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
    ## #   chip_bags <dbl>, sports_balls <dbl>, homes_powered <dbl>,
    ## #   sports_balls_integer <int>

``` r
mr_trash_wheel_2017 = read_excel("./p8105_hw2_ng2696_files/Trash-Wheel-Collection-Totals-8-6-19.xlsx",sheet="2017 Precipitation",range="A2:B14") %>%
  mutate(year=2017)
mr_trash_wheel_2018 = read_excel("./p8105_hw2_ng2696_files/Trash-Wheel-Collection-Totals-8-6-19.xlsx",sheet="2018 Precipitation",range="A2:B14") %>%
  mutate(year=208)
mr_trash_wheel_monthly = 
  bind_rows(mr_trash_wheel_2017,mr_trash_wheel_2018)%>%
  janitor::clean_names() %>%
  mutate(month=month.name[month])
head(mr_trash_wheel_monthly)
```

    ## # A tibble: 6 x 3
    ##   month    total  year
    ##   <chr>    <dbl> <dbl>
    ## 1 January   2.34  2017
    ## 2 February  1.46  2017
    ## 3 March     3.57  2017
    ## 4 April     3.99  2017
    ## 5 May       5.64  2017
    ## 6 June      1.4   2017

## Problem 2

Read and clean
pols\_month:

``` r
pols_month=read_csv("./p8105_hw2_ng2696_files/fivethirtyeight_datasets/pols-month.csv") %>%
separate(mon,c("year","month","day"),"-") %>%
  mutate(month=month.name[as.integer(month)]) %>%
  mutate(president=recode(prez_dem, `1` = "dem", `0` = "gop")) %>%
  select(-prez_dem,-prez_gop,-day)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
head(pols_month)
```

    ## # A tibble: 6 x 9
    ##   year  month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##   <chr> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ## 1 1947  January       23      51     253      23      45     198 dem      
    ## 2 1947  February      23      51     253      23      45     198 dem      
    ## 3 1947  March         23      51     253      23      45     198 dem      
    ## 4 1947  April         23      51     253      23      45     198 dem      
    ## 5 1947  May           23      51     253      23      45     198 dem      
    ## 6 1947  June          23      51     253      23      45     198 dem

Read and clean
snp:

``` r
snp=read_csv("./p8105_hw2_ng2696_files/fivethirtyeight_datasets/snp.csv") %>%
separate(date,c("month","day","year"),"/") %>%
  mutate(month_integer=as.integer(month),month=month.name[month_integer]) %>%
  arrange(year, month_integer) %>%
  select(year, month, close, -day, -month_integer) 
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
snp
```

    ## # A tibble: 787 x 3
    ##    year  month     close
    ##    <chr> <chr>     <dbl>
    ##  1 1950  January    17.0
    ##  2 1950  February   17.2
    ##  3 1950  March      17.3
    ##  4 1950  April      18.0
    ##  5 1950  May        18.8
    ##  6 1950  June       17.7
    ##  7 1950  July       17.8
    ##  8 1950  August     18.4
    ##  9 1950  September  19.5
    ## 10 1950  October    19.5
    ## # … with 777 more rows

Read and clean
unemployment:

``` r
unemployment=read_csv("./p8105_hw2_ng2696_files/fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(Jan:Dec,
               names_to="month",
               values_to="percent_unemployed") %>%
    mutate(month=recode(month, `Jan` = "January", `Feb` = "February",`Mar` = "March",`Apr` = "April",`May` = "May",`Jun` = "June",`Jul` = "July",`Aug` = "August",`Sep` = "September",`Oct` = "October",`Nov` = "November", `Dec`="December")) %>%
    janitor::clean_names() 
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
unemployment
```

    ## # A tibble: 816 x 3
    ##     year month     percent_unemployed
    ##    <dbl> <chr>                  <dbl>
    ##  1  1948 January                  3.4
    ##  2  1948 February                 3.8
    ##  3  1948 March                    4  
    ##  4  1948 April                    3.9
    ##  5  1948 May                      3.5
    ##  6  1948 June                     3.6
    ##  7  1948 July                     3.6
    ##  8  1948 August                   3.9
    ##  9  1948 September                3.8
    ## 10  1948 October                  3.7
    ## # … with 806 more rows

Merge snp and pols\_month:

``` r
snp_pols_month=
full_join(snp, pols_month, by=c("year","month")) %>%
  mutate(year=as.integer(year))
snp_pols_month
```

    ## # A tibble: 823 x 10
    ##     year month close gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <int> <chr> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1  1950 Janu…  17.0      18      44     177      29      57     269
    ##  2  1950 Febr…  17.2      18      44     177      29      57     269
    ##  3  1950 March  17.3      18      44     177      29      57     269
    ##  4  1950 April  18.0      18      44     177      29      57     269
    ##  5  1950 May    18.8      18      44     177      29      57     269
    ##  6  1950 June   17.7      18      44     177      29      57     269
    ##  7  1950 July   17.8      18      44     177      29      57     269
    ##  8  1950 Augu…  18.4      18      44     177      29      57     269
    ##  9  1950 Sept…  19.5      18      44     177      29      57     269
    ## 10  1950 Octo…  19.5      18      44     177      29      57     269
    ## # … with 813 more rows, and 1 more variable: president <chr>

Merge above dataset with unemployment:

``` r
snp_pols_unemployment=
full_join(snp_pols_month, unemployment, by=c("year","month"))
snp_pols_unemployment
```

    ## # A tibble: 828 x 11
    ##     year month close gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <dbl> <chr> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1  1950 Janu…  17.0      18      44     177      29      57     269
    ##  2  1950 Febr…  17.2      18      44     177      29      57     269
    ##  3  1950 March  17.3      18      44     177      29      57     269
    ##  4  1950 April  18.0      18      44     177      29      57     269
    ##  5  1950 May    18.8      18      44     177      29      57     269
    ##  6  1950 June   17.7      18      44     177      29      57     269
    ##  7  1950 July   17.8      18      44     177      29      57     269
    ##  8  1950 Augu…  18.4      18      44     177      29      57     269
    ##  9  1950 Sept…  19.5      18      44     177      29      57     269
    ## 10  1950 Octo…  19.5      18      44     177      29      57     269
    ## # … with 818 more rows, and 2 more variables: president <chr>,
    ## #   percent_unemployed <dbl>
